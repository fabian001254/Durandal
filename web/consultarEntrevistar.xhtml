<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous"></link>
      <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'></link>
      <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/sweetalert2@7.12.15/dist/sweetalert2.min.css'></link>  
      <link rel="stylesheet" href="assets/css/StyleInterfaz.css"></link>
      <link rel = "shortcut icon" href="assets/img/durandal1.png" type ="image/x-icon"></link>
      <title>Consultar entrevistas</title>
</h:head>
<h:body>
  <p:growl id="growl" showDetail="true" />
  <p:growl id="growl-sticky" for="sticky-key" showDetail="true" sticky="true" />
  <f:event type="preRenderView" listener="#{usuariosControlador.validarSesion()}" />
  <f:event type="preRenderView" listener="#{usuariosControlador.comprobar('Gh')}" />
      <a href="#top"><span class="arriba text-center" style="z-index:1">↑</span></a>
          <div class="row" id="top">
        <div class="col">
          <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #11101D ;">
            <img src="assets/img/durandal1.png" width="180" style="margin-left: 2%;"></img>
            <button type="button" class="navbar-toggler bg-light" data-toggle="collapse" data-target="#Menu">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end sticky-top" id="Menu" >
              <ul class="navbar-nav mt-2">
                <div class="usuario">
                  <img src="#{usuariosControlador.pathFoto(usuariosControlador.usuarioLogeado().numerodocumento)}" class="imagen" alt=""></img>
                  <div class="info">
              
                  <label class="nombre">#{usuariosControlador.usuarioLogeado().nombre1} #{usuariosControlador.usuarioLogeado().apellido1}</label>
                  <p class="perfil">Gestión Humana</p>
               
              </div>
                  <h:form>
                      <p:commandButton value="Cerrar Sesión" style="margin-top: 3px" actionListener="#{usuariosControlador.cerrarSesion()}"/>
                  </h:form> 
                </div>
              </ul>
            </div>
          </nav>
        </div>
      </div>
      <!-- Menu lateral de Navegación -->
      <div class="row">
      <div class="col-md-3">
      <nav id="Menu" class="d-md-block collapse sidebar pl-3">
        <div class="texto mt-4">
          <a class="nav-link colapsador mt-4" href="gestion_humana.xhtml" role="button">
            <i class='bx bxs-home'></i> Página principal
          </a>
        </div>
        <div class="texto mt-2">
          <a class="nav-link colapsador mt-2" data-toggle="collapse" href="#menu1" role="button">
            Reclutamiento <i class='bx bxs-down-arrow'></i>
          </a>
          <div class="collapse mb-3" id="menu1">
            <ul class="navbar-nav">
                <li class="nav-item"><a href="solicitudes-de-reclutamiento-g.xhtml" class="nav-link"
                    target="principal"><i class='bx bx-grid-alt'></i>Solicitudes</a></li>
                <li class="nav-item"><a href="consultarEntrevistar.xhtml" class="nav-link" target="principal"><i
                      class='bx bx-grid-alt'></i>Entrevistas</a></li>
            </ul>
          </div>        
          <a class="nav-link mt-2" data-toggle="collapse" href="#menu3" role="button">
            Calificaciones <i class='bx bxs-down-arrow'></i>
          </a>
          <div class="collapse mb-3" id="menu3">
            <ul class="navbar-nav">

                <li class="nav-item"><a href="vercalificaciones.xhtml" class="nav-link"><i class='bx bx-chat'></i>
                    Calificaciones personal</a></li>
                <li class="nav-item"><a href="formulario_de_calificacion.xhtml" class="nav-link"><i
                      class='bx bx-pie-chart-alt-2'></i> Formulario de calificaciones</a></li>
            </ul>
          </div>          
          <a class="nav-link mt-2" data-toggle="collapse" href="#menu5" role="button">
            Apartes de contratación <i class='bx bxs-down-arrow'></i>
          </a>
          <div class="collapse mb-3" id="menu5">
            <ul class="navbar-nav">
                <li class="nav-item"><a href="consultar_aparte_contratacion.xhtml" class="nav-link"><i
                      class='bx bxs-note'></i> Consultar apartes</a></li>
            </ul>
          </div>

          <a class="nav-link mt-2" data-toggle="collapse" href="#menu6" role="button">
            Perfil <i class='bx bxs-down-arrow'></i>
          </a>
          <div class="collapse mb-3" id="menu6">
            <ul class="navbar-nav">
                <li class="nav-item"><a href="crear_perfil-especialidad.xhtml" class="nav-link"><i
                      class='bx bxs-file-blank'></i> Crear perfil</a></li>
            </ul>
          </div>

          <a class="nav-link mt-2" data-toggle="collapse" href="#menu7" role="button">
            Informes de contratación <i class='bx bxs-down-arrow'></i>
          </a>
          <div class="collapse mb-3" id="menu7">
            <ul class="navbar-nav">
                <li class="nav-item"><a href="crear_informecontratacion.xhtml" class="nav-link"><i
                      class='bx bx-paperclip'></i> Crear informe de contratación</a></li>
                <li class="nav-item"><a href="consultar_infomecontratacion.xhtml" class="nav-link"><i
                      class='bx bx-paperclip'></i> Consultar informe de contratación</a></li>
            </ul>
          </div>
          <a class="nav-link mt-2" data-toggle="collapse" href="#menu10" role="button">
            Reportes estadísticos <i class='bx bxs-down-arrow'></i>
          </a>
          <div class="collapse mb-3" id="menu10">
            <ul class="navbar-nav">
                <li class="nav-item"><a href="consultar_reportes_estadisticos_gestionhumana.xhtml" class="nav-link"
                    target="principal"><i class='bx bx-cog'></i> Cosultar reportes estadísticos</a></li>
            </ul>
          </div>

          <a class="nav-link mt-2" data-toggle="collapse" href="#menu11" role="button">
            Ajustar cuenta <i class='bx bxs-down-arrow'></i>
          </a>
          <div class="collapse mb-3" id="menu11">
            <ul class="navbar-nav">
                <li class="nav-item"><a href="ajustes_gh.xhtml" class="nav-link" target="principal"><i
                      class='bx bx-cog'></i> Configurar cuenta</a></li>
            </ul>
          </div>
        </div>
      </nav>
    </div>
        <div class="col-md-9">
            <div class="row p-3 justify-content-around text-center">
              <div class="container">
                  <h:form id="frmPer">
                      <p:dataTable id="tEntrevistas" value="#{aspirantesControlador.listarEntrevistas()}" var="ent" style="width: 98%"
                         rows="3" paginator="true" paginatorPosition="bottom"
                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         currentPageReportTemplate="{startRecord}-{endRecord} de {totalRecords} registros"
                         rowsPerPageTemplate="3,5,10,{ShowAll|'Todos'}" 
                         widgetVar="wtInformes" emptyMessage="No hay Registros que coincidan con el criterio" >
                 <f:facet name="header">
                    <div align="center">
                        <span>Buscar: </span>
                        <p:inputText id="globalFilter" onkeyup="PF('wtSolicitudes').filter()" />
                    </div>
                </f:facet>
                      <p:column headerText="Número documento aspirante" filterMatchMode="contains" sortBy="#{ent.documento}" filterBy="#{ent.documento}">
                          <p:outputLabel value="#{ent.documento}"/>
                      </p:column>
                           <p:column headerText="Nombre del aspirante" filterMatchMode="contains" sortBy="#{ent.documento}" filterBy="#{ent.documento}">
                               <p:outputLabel value="#{usuariosControlador.BuscarNombre(ent.documento)} #{usuariosControlador.BuscarApellido(ent.documento)}"/>
                      </p:column>
                          <p:column headerText="Hoja de vida" filterMatchMode="contains" sortBy="#{ent.documento}" filterBy="#{ent.documento}">
                              <a  onclick="#{aspirantesControlador.BuscarHv(ent.documento)}">Ver</a>
                      </p:column>
                      <p:column headerText="Hora de la entrevista" filterMatchMode="contains">
                          <p:outputLabel value="#{ent.hora}"><f:convertDateTime pattern="HH:mm"></f:convertDateTime></p:outputLabel>
                      </p:column>
                      <p:column headerText="Día de la entrevista" filterMatchMode="contains" >
                          <p:outputLabel value="#{ent.fecha}"><f:convertDateTime pattern="yyyy/MM/dd"></f:convertDateTime></p:outputLabel>
                      </p:column>
                        <p:column headerText="Prueba psicotecnica" filterMatchMode="contains" >
                            <a href="#{psicotecnicasControlador.consultarPrueba(ent.documento)}" class="btn btn-warning" >Consultar prueba</a>
                      </p:column>
                       <p:column headerText="Modificar" filterMatchMode="contains">
                           <p:commandButton  
                               style="margin-bottom: 6px"
                                onclick="return confirm('¿Está seguro de aceptar este aspirante?')" update="tEntrevistas" actionListener="#{aspirantesControlador.AceptarEnt(ent.documento)}" ajax="false"
                                        value="Aceptar" 
                                            />
                           <p:commandButton 
                               value="Rechazar"
                               onclick="return confirm('¿Está seguro de rechazar este aspirante?')"                                      
                               actionListener="#{aspirantesControlador.RechazarEnt(ent.documento,1)}" update="tEntrevistas" ajax="false"/>
                                          
                      </p:column> 
            </p:dataTable>
                  </h:form>
              </div>
            </div>
          </div>
      </div>
      
      ¯\_( ͡❛ ͜ʖ ͡❛)_/¯
      
      </h:body>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@7.12.15/dist/sweetalert2.all.min.js"></script> 
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
      </html>
